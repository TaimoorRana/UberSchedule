
<!--title of the page & subtitle div-->
<div class="titleCont">
  <br/><br/>
  <span class="whiteFONT titleFONT">
    Fall 2015
  </span><br/>
  <span class="whiteFONT subtitleFONT"></span>
</div>

<!--main outer container div-->
<div class="whiteBCKG extend">
  <!-- inside container div-->
  <div class="mainContent" style="margin: 0 auto" >

    <div class="greybody">
      <% @possible_schedules.each do %>
      <table border="2px">
        <tr>
          <th>Time</th>
          <th>&nbsp;&nbsp;&nbsp;Monday&nbsp;&nbsp;&nbsp;</th>
          <th>&nbsp;&nbsp;Tuesday&nbsp;&nbsp;  </th>
          <th>Wednesday</th>
          <th>&nbsp;Thursday&nbsp;</th>
          <th>&nbsp;&nbsp;&nbsp;Friday&nbsp;&nbsp;&nbsp;</th>
        </tr>

        <% @conflicts_sections.each do |section| %>
            <%= section %>
        <% end %>
        <br/>


        <!--This is used to calculate the time that will appear on the
        the left side of the schedule-->
        <% x = Time.local(2015,'jan',15,8,0,0) %>
        <% @monday_section_duration = 0 %>
        <% @tuesday_section_duration = 0 %>
        <% @wednesday_section_duration = 0 %>
        <% @thursday_section_duration = 0 %>
        <% @friday_section_duration = 0 %>

        <% (0..192).each do |i|%>
            <% if (x.min == 0) then minutes = '00' else minutes = "#{x.min}" end %>
            <% time= "#{x.hour}:#{minutes}" %>
            <% x += 300 %>
            <tr>

              <td> <%= time %> </td>
              <!-- this will try to match the courses on the given day to the current time on the schedule,-->
              <% if @mondaySections.any? && @mondaySections.first.section.time_start == time  %>
                  <% @monday_section_duration = @mondaySections.first.row_span %>

                  <td rowspan="<%= @mondaySections.first.row_span%>" style="background-color:<%=@mondaySections.first.color%>; border-bottom: none" >
                    <%= @mondaySections.first.section.course.dept %> <%= @mondaySections.first.section.course.number %> <br/>
                    <%= @mondaySections.first.section.name %> <br/>
                    <% if @mondaySections.first.section.is_a?(Section) %>
                        Sec id: <%=@mondaySections.first.section.id %> <br/>

                    <% elsif @mondaySections.first.section.is_a?(Tutorial) %>
                        Tut Id:<%= @mondaySections.first.section.id %>  <br/>
                        Section id: <%= @mondaySections.first.section.section.id %> <br/>
                    <% else %>
                        Lab Id:<%= @mondaySections.first.section.id %><br/>
                        Tut Id:<%= @mondaySections.first.section.tutorial.id %>  <br/>
                        Section id: <%= @mondaySections.first.section.section.id %> <br/>
                    <% end %>
                    <%= @mondaySections.first.section.time_start %><br/>
                    <%= @mondaySections.first.section.time_end %></td>

                  <% @mondaySections.shift(1)%>
              <% elsif @monday_section_duration > 1 %>
                  <% @monday_section_duration = @monday_section_duration - 1 %>
              <% else %>
                  <td> </td>

              <% end %>


              <% if @tuesdaySections.any? &&  @tuesdaySections.first.section.time_start == time  %>
                  <% @tuesday_section_duration = @tuesdaySections.first.row_span %>

                  <td rowspan="<%=@tuesdaySections.first.row_span%>" style="background-color:<%=@tuesdaySections.first.color%>; border-bottom: none" >
                    <%= @tuesdaySections.first.section.course.dept %> <%= @tuesdaySections.first.section.course.number %> <br/>
                    <%= @tuesdaySections.first.section.name %> <br/>
                    <% if @tuesdaySections.first.section.is_a?(Section) %>
                        Sec id: <%=@tuesdaySections.first.section.id %> <br/>

                    <% elsif @tuesdaySections.first.section.is_a?(Tutorial) %>
                        Tut Id:<%= @tuesdaySections.first.section.id %>  <br/>
                        Section id: <%= @tuesdaySections.first.section.section_id %> <br/>
                    <% else %>
                        Lab Id:<%= @tuesdaySections.first.section.id %><br/>
                        Tut Id:<%= @tuesdaySections.first.section.tutorial.id %>  <br/>
                        Section id: <%= @tuesdaySections.first.section.section.id %> <br/>
                    <% end %>
                    <%= @tuesdaySections.first.section.time_start %><br/>
                    <%= @tuesdaySections.first.section.time_end %></td>

                    <% @tuesdaySections.shift(1) %>
              <% elsif @tuesday_section_duration > 1 %>
                  <% @tuesday_section_duration = @tuesday_section_duration - 1 %>
              <% else %>
                  <td> </td>

              <% end %>


              <% if @wednesdaySections.any? && @wednesdaySections.first.section.time_start == time  %>
                  <% @wednesday_section_duration = @wednesdaySections.first.row_span %>

                  <td rowspan="<%=@wednesdaySections.first.row_span%>" style="background-color:<%=@wednesdaySections.first.color%>; border-bottom: none" >
                    <%= @wednesdaySections.first.section.course.dept %> <%= @wednesdaySections.first.section.course.number %> <br/>
                    <%= @wednesdaySections.first.section.name %> <br/>
                    <% if @wednesdaySections.first.section.is_a?(Section) %>
                        Sec id: <%=@wednesdaySections.first.section.id %> <br/>

                    <% elsif @wednesdaySections.first.section.is_a?(Tutorial) %>
                        Tut Id:<%= @wednesdaySections.first.section.id %>  <br/>
                        Section id: <%= @wednesdaySections.first.section.section_id %> <br/>
                    <% else %>
                        Lab Id:<%= @wednesdaySections.first.section.id %><br/>
                        Tut Id:<%= @wednesdaySections.first.section.tutorial.id %>  <br/>
                        Section id: <%= @wednesdaySections.first.section.section.id %> <br/>
                    <% end %>
                    <%= @wednesdaySections.first.section.time_start %><br/>
                    <%= @wednesdaySections.first.section.time_end %></td>

                  <% @wednesdaySections.shift(1) %>
              <% elsif @wednesday_section_duration > 1 %>
                  <% @wednesday_section_duration = @wednesday_section_duration - 1 %>
              <% else %>
                  <td> </td>

              <% end %>


              <% if @thursdaySections.any? && @thursdaySections.first.section.time_start == time  %>
                  <% @thursday_section_duration = @thursdaySections.first.row_span %>
                  <td rowspan="<%=@thursdaySections.first.row_span%>" style="background-color:<%=@thursdaySections.first.color%>; border-bottom: none" >
                    <%= @thursdaySections.first.section.course.dept %> <%= @thursdaySections.first.section.course.number %> <br/>
                    <%= @thursdaySections.first.section.name %> <br/>
                    <% if @thursdaySections.first.section.is_a?(Section) %>
                        Sec id:<%=@thursdaySections.first.section.id %> <br/>

                    <% elsif @thursdaySections.first.section.is_a?(Tutorial) %>
                        Tut Id:<%= @thursdaySections.first.section.id %>  <br/>
                        Section id: <%= @thursdaySections.first.section.section_id %> <br/>
                    <% else %>
                        Lab Id:<%= @thursdaySections.first.section.id %><br/>
                        Tut Id:<%= @thursdaySections.first.section.tutorial.id %>  <br/>
                        Section id:<%= @thursdaySections.first.section.section.id %> <br/>
                    <% end %>
                    <%= @thursdaySections.first.section.time_start %><br/>
                    <%= @thursdaySections.first.section.time_end %></td>

                  <% @thursdaySections.shift(1) %>
              <% elsif @thursday_section_duration > 1 %>
                  <% @thursday_section_duration = @thursday_section_duration - 1 %>
              <% else %>
                  <td> </td>

              <% end %>


              <% if @fridaySections.any? && @fridaySections.first.section.time_start == time  %>

                  <% @friday_section_duration = @fridaySections.first.row_span %>
                    <td rowspan="<%=@fridaySections.first.row_span%>" style="background-color:<%=@fridaySections.first.color%>; border-bottom: none" >
                      <%= @fridaySections.first.section.course.dept %> <%= @fridaySections.first.section.course.number %> <br/>
                      <%= @fridaySections.first.section.name %> <br/>
                       <% if @fridaySections.first.section.is_a?(Section) %>
                          Sec id: <%=@fridaySections.first.section.id %> <br/>

                      <% elsif @fridaySections.first.section.is_a?(Tutorial) %>
                          Tut Id:<%= @fridaySections.first.section.id %>  <br/>
                          Section id: <%= @fridaySections.first.section.section_id %> <br/>
                      <% else %>
                          Lab Id:<%= @fridaySections.first.section.id %><br/>
                          Tut Id:<%= @fridaySections.first.section.tutorial.id %>  <br/>
                          Section id:<%= @fridaySections.first.section.section.id %> <br/>

                    <% end %>
                          <%= @fridaySections.first.section.time_start %><br/>
                          <%= @fridaySections.first.section.time_end %></td>

                    <% @fridaySections.shift(1) %>
              <% elsif @friday_section_duration > 1 %>
                  <% @friday_section_duration = @friday_section_duration - 1 %>
              <% else %>
                  <td> </td>
              <% end %>
            </tr>
        <% end %>
      </table>
          <% end %>
      <button class="btn btn-default btn-lg"> <%= link_to('Registered Courses', {action: 'registered_courses'}) %></button>
    </div>
  </div>
</div>